<!DOCTYPE html>
<html lang="en" class="h-100"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="PrayerTime">
    <meta name="description" content=" Get accurate prayer times for your region with our simple and efficient tool. Easy access, designed for simplicity and effectiveness. Stay connected to faith. ">
    <title>PrayerTime.</title>

    <!-- <script type="module" src="src/prayers.js"></script> -->
    <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="src/style.css">
    <link rel="stylesheet" href="src/home.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gulzar&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400..700&display=swap" rel="stylesheet">
        <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-65S11RJ383"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-65S11RJ383');
    </script>

    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "miqo3c1phd");
    </script>
</head>
<body class="h-100 overflow-x-hidden garamond primary-dark text-white ">
    <nav class="navbar primary">
        <div class=" col container justify-content-center">
            <a class="navbar-brand" href="./index.html">
                <h1 class="text-white">Prayertime.</h1>
            </a>
        </div>
        <div class="container col justify-content-center gap-5">
            <a class="nav-item text-decoration-none" href="src/prayers.html">
                <h3 class="text-white">Prayers</h3>
            </a>
        </div>
    </nav>
    <section class="p-5 my-3 my-5 justify-content-center d-flex">
        <div class="container h-100 d-flex row text-center justify-content-center h-100">
            <div class="container d-flex justify-content-center mb-5">
                <img class="brr" src="brr-big.png" alt="">
            </div>

            <div class="pt-3 container d-flex row justify-content-around my-5 gap-5 h-100">

                <div class="col-md">
                    <div id="card1" class="card border-secondary-custom border-2">
                        <div class="card-body d-flex flex-column flex-lg-row  justify-content-around align-items-center">

                            <div class="my-4">
                                <h3 class="card-title mt-3 mb-4">Prayers</h3>
                                <h3 class="card-title mb-4">الصلاة</h3>
                                <div class="container d-flex flex-row justify-content-around">
                                    <h2 id="Fajr" class="card-text"></h2>
                                </div>
    
                                <h5 class="" >get live prayer times.</h5>
                            </div>
                           
                            <div>

                                <a href="src/prayers.html">
                                    <button class="btn btn-color-primary btn-lg my-3">
                                        <b>Enter</b>  <i class="bi ms-2 bi-arrow-right"></i>
                                    </button>
                                </a>
                            </div>
                           
                        </div>
                    </div>
                </div>

                <div class="col-md">
                    <div id="card1" class="card border-secondary-custom border-2">
                        <div class="card-body d-flex flex-column flex-lg-row justify-content-around align-items-center">

                            <div class="my-4">
                                <h3 class="card-title mt-3 mb-4">Learn To Pray</h3>
                                <h3 class="card-title mb-4">تعلم الصلاة</h3>
    
                                <div class="container d-flex flex-row justify-content-around">
                                    <h2 id="Fajr" class="card-text"></h2>
                                </div>

                                <h5>Learn to perform the daily prayers.</h5>
                            </div>

                            <div>
                                
                                <a href="src/learn.html">
                                    <button class="btn btn-color-primary btn-lg btn-outline-dark my-3">
                                        <b>Learn</b>  <i class="bi ms-2 bi-arrow-right"></i>
                                    </button>
                                </a>
                                
                            </div>
                        </div>
                    </div>
                    
                </div>

                <div class="container mt-2 object-fit-scale">
                    <h1 class="color-primary amiri mt-5 lh-nice" id="verse"></h1>
                    <h4 class="color-primary amiri lh-nice" id="verse-en"></h4>
                    <h3 class="color-primary lh-nice" id="verse-number"></h3>
                </div>
            </div>
        </div>
    </section>


    <script>
        var arabicNormChar = {
            'ك': 'ک', 'ﻷ': 'لا', 'ؤ': 'و', 'ى': 'ی', 'ي': 'ی', 'ئ': 'ی', 'أ': 'ا', 'إ': 'ا', 'آ': 'ا', 'ٱ': 'ا', 'ٳ': 'ا', 'ة': 'ه', 'ء': '', 'ِ': '', 'ْ': '', 'ُ': '', 'َ': '', 'ّ': '', 'ٍ': '', 'ً': '', 'ٌ': '', 'ٓ': '', 'ٰ': '', 'ٔ': '', '�': ''
        }

        let quran = null

        var simplifyArabic  = function (str) {
            return str.replace(/[^\u0000-\u007E]/g, function(a){ 
                var retval = arabicNormChar[a]
                if (retval == undefined) {retval = a}
                return retval; 
            }).normalize('NFKD').toLowerCase();
        }

        const verse = document.getElementById("verse")
        const verseEn = document.getElementById("verse-en")
        const verseNum = document.getElementById("verse-number")

        fetch('quran.json')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                quran = data

                fetchquran()
            });

        function fetchquran(){
            let rand = Math.floor((Math.random() * 114)+1)
            let rand2 = Math.floor((Math.random() * 6)+2)

            for (let i = 0; i < quran.length; i++){
                
                if(quran[i].surah_number == rand){
                    if(quran[i].verse_number == rand2){
                        let isShort = (simplifyArabic(quran[i].text).split(' ').length) <= 6
                        if(isShort){
                            verse.innerText = `( ${quran[i].text} )`
                            verseEn.innerText = `~ ${quran[i].translation} ~`
                            verseNum.innerText = `${quran[i].verse_number} : ${quran[i].surah_number}`
                            console.log(quran[i])
                        }
                        else{
                            fetchquran()
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>